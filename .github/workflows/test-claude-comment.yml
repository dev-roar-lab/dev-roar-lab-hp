name: Test Claude Comment (PAT)

on:
  workflow_dispatch:
    inputs:
      issue_number:
        description: 'Issue number to comment on'
        required: true
        type: number

permissions:
  contents: read

jobs:
  comment:
    runs-on: ubuntu-latest
    steps:
      - name: Comment on issue with @claude mention (using PAT)
        env:
          # Personal Access Tokenã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€Claude Code ActionãŒ
          # botã§ã¯ãªãäººé–“ã®ã‚³ãƒ¡ãƒ³ãƒˆã¨ã—ã¦èªè­˜ã—ã€åå¿œã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™
          GH_TOKEN: ${{ secrets.GITHUB_PAT }}
        run: |
          gh issue comment ${{ inputs.issue_number }} \
            --repo ${{ github.repository }} \
            --body "@claude ã“ã®issueã®å†…å®¹ã‚’ç¢ºèªã—ã¦ã€æ”¹å–„ææ¡ˆã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚"

      - name: Output test info
        run: |
          echo "âœ… ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ã—ã¾ã—ãŸ"
          echo "ğŸ“ Issue: #${{ inputs.issue_number }}"
          echo "ğŸ”‘ æŠ•ç¨¿è€…: PATã®æŒã¡ä¸»ï¼ˆäººé–“ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼‰"
          echo ""
          echo "æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:"
          echo "1. Issue #${{ inputs.issue_number }} ã‚’ç¢ºèª"
          echo "2. Claude Code ActionãŒåå¿œã™ã‚‹ã‹ç¢ºèª"
          echo ""
          echo "âš ï¸ æ³¨æ„: GITHUB_PATã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™"
